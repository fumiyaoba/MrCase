{% extends "base.html" %}
{% block title %}ユーザー作成{% endblock %}

{% block content %}
<div class="page-header">
  <h1>ユーザー作成</h1>
  <a href="{% url 'user_list' %}" class="btn btn-secondary">← 一覧へ戻る</a>
</div>

<div class="card" style="max-width:560px">
  <form method="post">
    {% csrf_token %}
    {% if form.errors %}
    <div class="alert alert-danger">
      {% for field in form %}{% for error in field.errors %}{{ error }}<br>{% endfor %}{% endfor %}
      {% for error in form.non_field_errors %}{{ error }}<br>{% endfor %}
    </div>
    {% endif %}
    <div class="form-group">
      <label for="id_username">ユーザー名 <span style="color:#ef4444">*</span></label>
      <input type="text" name="username" id="id_username" value="{{ form.username.value|default_if_none:'' }}" required>
    </div>
    <div style="display:flex; gap:1rem">
      <div class="form-group" style="flex:1">
        <label for="id_last_name">姓</label>
        <input type="text" name="last_name" id="id_last_name" value="{{ form.last_name.value|default_if_none:'' }}">
      </div>
      <div class="form-group" style="flex:1">
        <label for="id_first_name">名</label>
        <input type="text" name="first_name" id="id_first_name" value="{{ form.first_name.value|default_if_none:'' }}">
      </div>
    </div>
    <div class="form-group">
      <label for="id_password">パスワード <span style="color:#ef4444">*</span></label>
      <input type="password" name="password" id="id_password" required>
    </div>
    <div class="form-group">
      <label for="id_password_confirm">パスワード（確認） <span style="color:#ef4444">*</span></label>
      <input type="password" name="password_confirm" id="id_password_confirm" required>
    </div>
    <div class="form-group">
      <label for="id_slack_user_id">Slack メンバーID</label>
      <input type="text" name="slack_user_id" id="id_slack_user_id" value="{{ form.slack_user_id.value|default_if_none:'' }}" placeholder="例: U09TRJ3UJ85">
      <div style="font-size:.78rem; color:#64748b; margin-top:4px">Slackのプロフィール「・・・」→「メンバーIDをコピー」で取得できます</div>
    </div>
    <div class="form-group">
      <div class="form-check">
        <input type="checkbox" name="is_staff" id="id_is_staff" {% if form.is_staff.value %}checked{% endif %}>
        <label for="id_is_staff" style="margin-bottom:0">管理者にする</label>
      </div>
    </div>
    <div style="display:flex; gap:.75rem; margin-top:1.5rem">
      <button type="submit" class="btn btn-primary">作成する</button>
      <a href="{% url 'user_list' %}" class="btn btn-secondary">キャンセル</a>
    </div>
  </form>
</div>
{% endblock %}
